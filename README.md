프로젝트 개요
-------------
기능 요구사항
1. 계좌이체시 이체작업 직전에 sleep(7~30초) 함수로 임의로 병목을 준 상황에서 입금 요청시정상적으로 처리가 되어야하고 클라이언트는 바로 응답(2초이내)을 받아야 함.
2. 계좌의 값이 마이너스가 되면 안됨.

구현컨셉
-------------
1. 동시작업요청시 보유 계좌의 금액 총량 > 출금액의 시점에서 실행을 보장해야하므로 
2. 요청을 공유 할 수있는 데이터공간을 설정(보통은 static변수)하여야하고 클라이언트 응답을 2초내에 보장 받아야 하므로 비동기 응답 방식을 사용하기로 함

##핵심기능(계좌이체) 구현 과정
1. 메모리공간(redis)에 보내는 계좌번호를 식별자로 지정하여 대기열의 금액 +현재 이체금액을 저장하여 요청작업을 생성함. 
2. 총 대기 이체금액보다 계좌 보유액이 적으면 금액부족 리턴
3. celery 워커가 대기한 작업 큐(db저장)를 실행후 성공 또는 실패시 대기 잔고를 지움

*redis 적용 이유: 동시에 계좌이체가 발생한 상황을 가정해서 계좌의 잔고와 대기 송금요청을 비교하기 위해 worker와 어플리케이션간에 메모리공간을 공유할수 있어야 했다*


localhost:8000에서 Django 서버 어플리케이션 실행 방법
-------------

0. 구동에 필요한 패키지 설치
> pip install -r requirements.txt

1. redis 설치 (celery의 브로커 역할을 하는 작업큐와 인 메모리저장소로 쓰기위함)
> https://redis.io/download

2. celery 워커 실행
> celery --app  ipd_project worker -l DEBUG

3. 타 터미널에서 django manage.py와 동일한 디렉토리에서 서버 실행
> python manage.py runserver


테스트 방법
-------------
1. django admin 에서 테스트에 필요한 자원(사용자 / 계좌/ 계좌종류 / 계좌이체 정보)을 생성/관리 할수 있습니다.(admin /123) <br>
2. 회원은 로그인후 계좌이체 메뉴에서 계좌정보 입력후 수수료가 계산되고나면 
3. 모달창이 뜨고 화면에서 이체 할 수있습니다.
4. 이체결과는 테스트를 위해 웹브라우져 콘솔로 표시됩니다.


알게된것
-------------
1. celery 서비스 워커는 기본적으로 process로 fork하지만 쓰레드로도 실행할 수 있다. disk io작업이 많을시 유리, cpu작업을 위주로한다면 프로세스 방식이나 sole옵션으로 작업을 cpu 집약적으로 처리할 수있다
2. 작업 큐에서 대기중인 작업은 비동기식으로 (앞 작업과 상관없이) 다른 서비스 워커에 의해 실행된다.
